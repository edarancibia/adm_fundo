<!DOCTYPE html>
<html xmlns="https://www.thymeleafe.org">
<head>
<meta charset="ISO-8859-1">
<title>High Chart Example - Spring Boot</title>
<link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<link rel="stylesheet"
    href="https://code.highcharts.com/css/highcharts.css" />
<script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
$(document).ready(function() {

    var diio = $('#txtdiio').val();

        $.ajax({
            type : 'GET',
            headers : {
                Accept : "application/json; charset=utf-8",
                "Content-Type" : "application/json; charset=utf-8"
            },
            url : 'http://localhost:8080/pesaje/grafico-peso/'+diio,
            success : function(result) {
                google.charts.load('current', {
                    'packages' : [ 'corechart' ]
                });
                google.charts.setOnLoadCallback(function() {
                    drawChart(result);
                });
            }
        });

        function drawChart(result) {

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'fecha');
            data.addColumn('number', 'peso');
            var dataArray = [];
            $.each(result, function(i, obj) {
                dataArray.push([ obj.fecha, obj.peso ]);
            });

            data.addRows(dataArray);


            var barchart_options = {
                title : 'Variaci√≥n de peso',
                width : 400,
                height : 300,
                legend : 'none',

                hAxis: {
                  title: 'Fecha'
                },
                vAxis: {
                  title: 'Peso'
                }
            };
            var barchart = new google.visualization.LineChart(document
                    .getElementById('barchart_div'));
            barchart.draw(data, barchart_options);
        }

    });
        
</script>
</head>
<body>
    <input type="hidden" id="txtdiio" th:value="*{diio}">
    <!--Div that will hold the pie chart-->
    <div id="barchart_div"></div>
  </body>
</html>